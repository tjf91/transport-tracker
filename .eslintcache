[{"S:\\Projects\\transport-tracker\\src\\index.js":"1","S:\\Projects\\transport-tracker\\src\\reportWebVitals.js":"2","S:\\Projects\\transport-tracker\\src\\redux\\store.js":"3","S:\\Projects\\transport-tracker\\src\\components\\App\\App.js":"4","S:\\Projects\\transport-tracker\\src\\redux\\userReducer.js":"5","S:\\Projects\\transport-tracker\\src\\components\\routes.js":"6","S:\\Projects\\transport-tracker\\src\\components\\Home\\Home.js":"7","S:\\Projects\\transport-tracker\\src\\components\\Header\\Header.js":"8","S:\\Projects\\transport-tracker\\src\\components\\Header\\Auth\\Auth.js":"9","S:\\Projects\\transport-tracker\\src\\components\\DriverDisplay\\DriverDisplay.js":"10","S:\\Projects\\transport-tracker\\src\\components\\Driver\\Driver.js":"11","S:\\Projects\\transport-tracker\\src\\components\\TripsDisplay\\TripsDisplay.js":"12","S:\\Projects\\transport-tracker\\src\\components\\Trip\\Trip.js":"13","S:\\Projects\\transport-tracker\\src\\components\\Forms\\ReceiptForm.js":"14","S:\\Projects\\transport-tracker\\src\\components\\Forms\\TripForm.js":"15","S:\\Projects\\transport-tracker\\src\\components\\MapboxGL\\MapboxGL.js":"16","S:\\Projects\\transport-tracker\\src\\components\\Receipt\\Receipt.js":"17","S:\\Projects\\transport-tracker\\src\\components\\Charts\\Pie.js":"18","S:\\Projects\\transport-tracker\\src\\components\\Charts\\Bar.js":"19","S:\\Projects\\transport-tracker\\src\\components\\Charts\\options.js":"20","S:\\Projects\\transport-tracker\\src\\components\\Charts\\barFunctions.js":"21","S:\\Projects\\transport-tracker\\src\\components\\Driver\\DriverEdit.js":"22","S:\\Projects\\transport-tracker\\src\\components\\MapboxGL\\DriverMap.js":"23","S:\\Projects\\transport-tracker\\src\\components\\Home\\Welcome.js":"24"},{"size":712,"mtime":1609759505555,"results":"25","hashOfConfig":"26"},{"size":362,"mtime":499162500000,"results":"27","hashOfConfig":"26"},{"size":312,"mtime":1610999006010,"results":"28","hashOfConfig":"26"},{"size":479,"mtime":1611015129589,"results":"29","hashOfConfig":"26"},{"size":894,"mtime":1611005404302,"results":"30","hashOfConfig":"26"},{"size":512,"mtime":1610995510501,"results":"31","hashOfConfig":"26"},{"size":779,"mtime":1611014995768,"results":"32","hashOfConfig":"26"},{"size":2656,"mtime":1611026895435,"results":"33","hashOfConfig":"26"},{"size":1674,"mtime":1611027001308,"results":"34","hashOfConfig":"26"},{"size":2664,"mtime":1611006498258,"results":"35","hashOfConfig":"26"},{"size":1904,"mtime":1611006638199,"results":"36","hashOfConfig":"26"},{"size":5525,"mtime":1611006475765,"results":"37","hashOfConfig":"26"},{"size":5915,"mtime":1611006937964,"results":"38","hashOfConfig":"26"},{"size":2517,"mtime":1610392136138,"results":"39","hashOfConfig":"26"},{"size":1209,"mtime":1610658354680,"results":"40","hashOfConfig":"26"},{"size":4038,"mtime":1610995916047,"results":"41","hashOfConfig":"26"},{"size":2692,"mtime":1610646757934,"results":"42","hashOfConfig":"26"},{"size":2086,"mtime":1611004116555,"results":"43","hashOfConfig":"26"},{"size":3089,"mtime":1611004096754,"results":"44","hashOfConfig":"26"},{"size":1450,"mtime":1610548016834,"results":"45","hashOfConfig":"26"},{"size":756,"mtime":1610501354004,"results":"46","hashOfConfig":"26"},{"size":2899,"mtime":1610996204423,"results":"47","hashOfConfig":"26"},{"size":2219,"mtime":1610995057150,"results":"48","hashOfConfig":"26"},{"size":2192,"mtime":1611027038363,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"1p0s679",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"52"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"76","messages":"77","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"52"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"52"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"52"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"52"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"92","messages":"93","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"52"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"52"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"S:\\Projects\\transport-tracker\\src\\index.js",[],["106","107"],"S:\\Projects\\transport-tracker\\src\\reportWebVitals.js",[],"S:\\Projects\\transport-tracker\\src\\redux\\store.js",[],"S:\\Projects\\transport-tracker\\src\\components\\App\\App.js",[],"S:\\Projects\\transport-tracker\\src\\redux\\userReducer.js",[],"S:\\Projects\\transport-tracker\\src\\components\\routes.js",[],"S:\\Projects\\transport-tracker\\src\\components\\Home\\Home.js",[],"S:\\Projects\\transport-tracker\\src\\components\\Header\\Header.js",["108"],"import React, { useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Auth from './Auth/Auth'\r\nimport './Header.scss'\r\nimport logo from '../imgs/favpng_truck-driver-car-less-than-truckload-shipping-driving.png'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport {loginUser,logout} from '../../redux/userReducer'\r\nimport axios from 'axios'\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nfunction Header(props){\r\n    const [pos, setPos]= useState({longitude:null,latitude:null})\r\n\r\n    const handleLogout=()=>{\r\n        console.log('logout')\r\n        props.history.push('/')\r\n        props.logout()\r\n    }\r\n    const updateLocation=()=>{\r\n        axios.put(`/drivers/${props.d_id}?q=location`,{lng:pos.longitude,lat:pos.latitude})\r\n        .then(()=>console.log('location update',pos))\r\n        .catch(e=>console.log(e))\r\n    }\r\n    function successLocation(e){\r\n        console.log('success',e)    \r\n        const {longitude,latitude}=e.coords        \r\n        setPos({longitude,latitude})\r\n        updateLocation()\r\n      }\r\n    function errorLocation(e){\r\n        console.log('ERROR LOCATION')\r\n      \r\n    }\r\n    \r\n    useEffect(()=>{\r\n        axios.get('/auth/user')\r\n        .then(res=>{\r\n            const {id,d_id,name}=res.data\r\n            props.loginUser({name,id,d_id})\r\n        })\r\n    },[])\r\n    \r\n    useEffect(()=>{\r\n        if(props.d_id){   \r\n                // navigator.geolocation.getCurrentPosition(successLocation,errorLocation,{enableHighAccuracy:true})         \r\n                const interval= setInterval(()=>{\r\n                console.log('Interval!')\r\n                navigator.geolocation.getCurrentPosition(successLocation,errorLocation,{enableHighAccuracy:true}) \r\n                \r\n                  },10000)\r\n                  return ()=>clearInterval(interval)\r\n                }\r\n    })\r\n    \r\n    return(\r\n        <header>            \r\n            <Link to='/'>\r\n                <img src={logo} alt='Logo' className='main-logo'/>\r\n            </Link>\r\n            {\r\n            props.isLoggedIn\r\n            ?<h1>Welcome<br/> {props.name}</h1>\r\n            :<h1>Transport Tracker</h1>\r\n            }\r\n            {\r\n                props.isLoggedIn\r\n                ?<Button variant=\"contained\" onClick={handleLogout}>Logout</Button>\r\n                :<Auth /> \r\n                    \r\n                    \r\n            }\r\n                \r\n                \r\n            \r\n                \r\n            \r\n        </header>\r\n    )\r\n}\r\nfunction mapStateToProps(reduxState){\r\n    return reduxState\r\n}\r\nexport default connect(mapStateToProps,{loginUser,logout})(withRouter(Header))","S:\\Projects\\transport-tracker\\src\\components\\Header\\Auth\\Auth.js",[],"S:\\Projects\\transport-tracker\\src\\components\\DriverDisplay\\DriverDisplay.js",["109","110","111"],"S:\\Projects\\transport-tracker\\src\\components\\Driver\\Driver.js",[],"S:\\Projects\\transport-tracker\\src\\components\\TripsDisplay\\TripsDisplay.js",["112","113","114"],"S:\\Projects\\transport-tracker\\src\\components\\Trip\\Trip.js",["115","116","117","118"],"S:\\Projects\\transport-tracker\\src\\components\\Forms\\ReceiptForm.js",["119"],"import React, { useEffect, useState } from \"react\"\r\nimport moment from 'moment' \r\n\r\nexport default function ReceiptForm(props){\r\n    const [date,setDate]=useState(moment(new Date()).format(\"yyyy-MM-DD\"))\r\n    \r\n    \r\n    // const [formReceipt, setFormReceipt]=useState({\r\n    //     date_created:null,\r\n    //     type:'',\r\n    //     amount:null,\r\n    //     total:null,\r\n    //     lat:null,\r\n    //     lng:null,\r\n    // })\r\n    const handleFormInput=(e)=>props.setFormReceipt({...props.formReceipt,[e.target.name]:e.target.value})\r\n    const handleAddReceipt=(e)=>{\r\n        e.preventDefault()\r\n        props.addReceipt(props.formReceipt)\r\n        props.setFormToggle(false) \r\n        \r\n    }\r\n    const handleEditReceipt=(e)=>{\r\n        e.preventDefault()\r\n        props.editReceipt(props.formReceipt)\r\n        props.setEditToggle(false)  \r\n    }\r\n    \r\n    useEffect(()=>{\r\n        \r\n        console.log('receipt form ')\r\n\r\n    },[props.formReceipt])\r\n    return(\r\n        <div>\r\n                <form onSubmit={!props.edit?handleAddReceipt:handleEditReceipt}>\r\n                <input onChange={handleFormInput} placeholder='City' name='city' defaultValue={props.formReceipt.city||''}/>  \r\n                <input onChange={handleFormInput} placeholder='State' name='state' defaultValue={props.formReceipt.state||''}/>\r\n                <input onChange={handleFormInput} name='date_created' type='date' defaultValue={props.date_created||date}/>\r\n                <select onChange={handleFormInput} name='type' type='radio' defaultValue={props.formReceipt.type}>\r\n                    <option value='gas'>Gas</option>\r\n                    <option value='repair'>Repair</option>\r\n                    <option value='food'>Food</option>\r\n                    <option value='tires'>Tires</option>\r\n                    <option value='other'>Other</option>\r\n                    </select>\r\n                <input onChange={handleFormInput} placeholder='Amount' name='amount' defaultValue={props.formReceipt.amount||''}/>\r\n                <input onChange={handleFormInput} placeholder='Total' name='total' defaultValue={props.formReceipt.total||''}/>\r\n                <input onChange={handleFormInput} placeholder='Lat' name='lat' defaultValue={props.formReceipt.lat||''}/>\r\n                <input onChange={handleFormInput} placeholder='Lng' name='lng' defaultValue={props.formReceipt.lng||''}/>\r\n                <button>Submit Receipt</button>\r\n            </form>\r\n                       \r\n        </div>\r\n    )\r\n\r\n}\r\n\r\n\r\n","S:\\Projects\\transport-tracker\\src\\components\\Forms\\TripForm.js",["120"],"import { useState } from \"react\"\r\nimport { withRouter } from \"react-router-dom\"\r\n\r\nfunction TripForm(props){\r\n    const [trip,setTrip]=useState({\r\n        name:'',\r\n        date_start:new Date().toLocaleString(),\r\n        date_end:null,\r\n        total:null,\r\n        company_id:props.id,\r\n        driver_d_id:props.d_id,\r\n        status:'active'\r\n    })\r\n    const handleChange=(e)=>setTrip({...trip,name:e.target.value})\r\n    const handleBeginTrip=(e)=>{\r\n        e.preventDefault()        \r\n        props.beginTrip(trip)\r\n        props.handleFormToggle(false)       \r\n    }\r\n    const handleEdit=(e)=>{\r\n        \r\n    }\r\n    \r\n\r\n    return(\r\n        <div>\r\n            {props.add_trip&&\r\n        <form onSubmit={handleBeginTrip}>\r\n            <input defaultValue={trip.name} onChange={handleChange} name='name' placeholder='Name of Trip' />\r\n            <button>Start</button>            \r\n        </form>\r\n            \r\n            }\r\n            {\r\n                props.edit_trip&&\r\n                <form>\r\n                    <input />\r\n                    <input />\r\n                    <input />\r\n                </form>\r\n            }\r\n        </div>\r\n    )\r\n} \r\n\r\nexport default withRouter(TripForm)","S:\\Projects\\transport-tracker\\src\\components\\MapboxGL\\MapboxGL.js",["121","122","123","124","125","126","127","128","129"],"import React, { useEffect, useRef, useState } from 'react'\r\nimport mapboxgl, { Marker } from \"mapbox-gl\";\r\nimport Moment from 'react-moment'\r\nimport moment from 'moment'\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport './MapboxGL.scss'\r\nimport 'dotenv'\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport fuel from '../imgs/favpng_fuel-dispenser-clip-art.png'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction MapboxGL(props){\r\n    \r\n  // const [marker, setMarker]= useState(null) \r\n  const [pos, setPos]= useState({lat:null,lng:null})  \r\n  const mapContainer = useRef(\"\");\r\n  const [driverPos,setDriverPos]=useState({lng:null,lat:null})\r\n  \r\n  const { REACT_APP_MAPBOX_APIKEY} = process.env;\r\n\r\n  //replace public key\r\n  mapboxgl.accessToken = 'pk.eyJ1IjoidGpmOTEiLCJhIjoiY2tpeXh6NDNnMDIzMjJ5cGhwcDA1bTVvbiJ9.HTkz382IfxQRTZOQt8btGA'\r\n    const styles = {\r\n        width: \"400px\",\r\n        height: \"400px\",\r\n        borderRadius: \"10px\"        \r\n      };\r\n     \r\n      useEffect(()=>{\r\n       let map=new mapboxgl.Map({\r\n          container:mapContainer.current,\r\n          style:'mapbox://styles/mapbox/streets-v11',\r\n          center:[-111,33],\r\n          zoom:3\r\n        })\r\n        \r\n        map.on('load',(e)=>{\r\n          //get driver lat and lng to create marker\r\n          axios.get(`/companies/${props.match.params.company_id}/drivers?q=${props.match.params.driver_d_id}`)\r\n          .then(res=>{\r\n            const markerNode = document.createElement('div')\r\n            markerNode.className='driver-marker'\r\n            markerNode.style.backgroundImage=`url(${res.data[1].profile_pic})`\r\n            console.log(markerNode)\r\n            console.log('new location',res.data)\r\n            new mapboxgl.Marker(\r\n              markerNode              \r\n              \r\n            )\r\n            .setLngLat(res.data[0]).addTo(map)\r\n          })\r\n          const receiptMarkers=  props.receipts.map((receipt,index)=>{  \r\n            let markerColors={gas:\"#81ae19\",food:\"#f47560\",tires:\"#f1e15b\",repair:'#61cdbb'}\r\n          let marker=                  \r\n         new mapboxgl.Marker({\r\n              \r\n              color: markerColors[receipt.type],\r\n              draggable: false,              \r\n              backgroundImage:  fuel,\r\n              \r\n            })\r\n\r\n            marker.setLngLat({lng:receipt.lng,lat:receipt.lat})            \r\n            .setPopup( new mapboxgl.Popup({ offset: 10,closeButton:false,className:\"popup\", })\r\n            .setHTML(`<h5>${moment(receipt.date_created).format(\"MMM Do YY\")}</h5>\r\n            <p>${receipt.type}</p>\r\n            <p>${receipt.total}</p>            \r\n            `))\r\n            .addTo(map)\r\n          })\r\n          })\r\n          \r\n         //reverse geolocation api call to get state and city name on map double click\r\n        map.on('dblclick',(e)=>{         \r\n          \r\n          axios.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lngLat.lng},${e.lngLat.lat}.json?access_token=${REACT_APP_MAPBOX_APIKEY}`)\r\n          .then(res=>{\r\n            console.log(res.data.features[res.data.features.length-3].place_name.split(','))\r\n            let placeArray=res.data.features[res.data.features.length-3].place_name.split(',')\r\n            props.setFormReceipt({...props.formReceipt,...e.lngLat,city:placeArray[0],state:placeArray[1]})\r\n          })\r\n          .catch(e=>console.log(e))\r\n        }) \r\n        \r\n        if(props.d_id){\r\n          map.addControl(\r\n            new mapboxgl.GeolocateControl({\r\n            positionOptions: {\r\n            enableHighAccuracy: true\r\n            },\r\n            trackUserLocation: true\r\n            })\r\n          )\r\n        }\r\n      },[props.receipts])\r\n      \r\n     \r\n      \r\n      \r\n    \r\n    return(\r\n        <div>          \r\n              <div ref={(el) => (mapContainer.current = el)} style={styles} />\r\n             \r\n        </div>\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(reduxState){\r\n  return reduxState\r\n}\r\nexport default connect(mapStateToProps)(withRouter(MapboxGL))","S:\\Projects\\transport-tracker\\src\\components\\Receipt\\Receipt.js",["130","131"],"import React, { useState } from 'react'\r\nimport Moment from 'react-moment'\r\nimport moment from 'moment'\r\nimport ReceiptForm from '../Forms/ReceiptForm'\r\nimport editPencil from '../imgs/favpng_icon-design-editing-iconfinder-icon.png'\r\nimport deleteIcon from '../imgs/favpng_button-checkbox.png'\r\nimport './Receipt.scss'\r\nimport axios from 'axios'\r\n\r\n\r\n\r\nexport default function Receipt (props){\r\n    // const [formReceipt,setFormReceipt]=useState({...props.receipt,date_created:moment(props.receipt.date_created).format(\"yyyy-MM-DD\"),lat:props.receipt.lat||props.formReceipt.lat,lng:props.receipt.lng||props.formReceipt.lng})\r\n    const [editToggle, setEditToggle]=useState(false) \r\n\r\n    // const editReceipt=(receipt)=>{\r\n    //    console.log('edit button',receipt) \r\n    //     axios.put(`/companies/${receipt.company_id}/drivers/${receipt.driver_d_id}/trips/${receipt.trip_id}/receipts/${receipt.id}`, receipt)\r\n    //     .then(res=>{\r\n    //         props.setReceipts([...props.receipts])\r\n    //         //update trips\r\n    //         props.getTrips()\r\n    //     })\r\n    //     .catch(e=>console.log(e))\r\n    // }\r\n\r\n    console.log('this is form receipt',props.date_created)\r\n    return (\r\n        <div className='receipts'>\r\n        <p> \r\n        <Moment format=\"MM/DD/YYYY\">                \r\n        {props.receipt.date_created}\r\n        </Moment>\r\n        <br/>\r\n            {props.receipt.type}\r\n        </p>            \r\n        <p>{props.receipt.city}, {props.receipt.state}</p>\r\n        <p>\r\n         ${props.receipt.total}\r\n        </p>\r\n            <div>\r\n                    {editToggle&&\r\n                    <ReceiptForm\r\n                    formReceipt={props.receipt}\r\n                    date_created={props.date_created}\r\n                    setFormReceipt={props.setFormReceipt}\r\n                    edit={true}\r\n                    setEditToggle={setEditToggle}\r\n                    editReceipt={props.editReceipt}\r\n                    // receipts={receipts}\r\n                    // addReceipt={addReceipt}\r\n                    // setFormToggle={setFormToggle}\r\n                    />\r\n                }\r\n                </div>\r\n        \r\n                <img onClick={()=>{\r\n                    props.setFormToggle(false)\r\n                    setEditToggle(!editToggle)}} src={editPencil} className='action-img' alt=''/>\r\n                    <br />\r\n                <img onClick={()=>{ \r\n                    window.confirm('You sure about erasing this receipts')&&\r\n                    props.deleteReceipt()\r\n                    }\r\n                    }           \r\n                    src={deleteIcon} className='action-img' alt=''/>\r\n      \r\n    </div>\r\n    )\r\n}","S:\\Projects\\transport-tracker\\src\\components\\Charts\\Pie.js",["132"],"S:\\Projects\\transport-tracker\\src\\components\\Charts\\Bar.js",["133"],"S:\\Projects\\transport-tracker\\src\\components\\Charts\\options.js",[],"S:\\Projects\\transport-tracker\\src\\components\\Charts\\barFunctions.js",[],"S:\\Projects\\transport-tracker\\src\\components\\Driver\\DriverEdit.js",["134","135"],"import React, { useState } from 'react'\r\nimport Dropzone from 'react-dropzone'\r\nimport { GridLoader } from 'react-spinners'\r\nimport randomstring from 'randomstring'\r\nimport axios from 'axios'\r\n\r\nexport default function DriverEdit (props){\r\n    const[isUploading,setIsUploading]=useState(false)\r\n    const[url,setUrl]=useState('http://via.placeholder.com/450x450')    \r\n    const getSignedRequest=([file])=>{\r\n        setIsUploading(true)\r\n        const fileName = `${props.driver.name.replace(/\\s/g, '-')}-${props.driver.driver_d_id}-profile_pic`; \r\n        \r\n        axios.get('/api/s3',{\r\n            params:{\r\n                'file-name':fileName,\r\n                'file-type': file.type,\r\n            }\r\n        })\r\n        .then(res=>{\r\n            console.log('signed response from server',res.data)\r\n            const { signedRequest, url}=res.data            \r\n            uploadFile(file,signedRequest,url)\r\n        })\r\n        .catch(e=>console.log(e))\r\n\r\n        const uploadFile=(file,signedRequest,url)=>{\r\n           const options ={\r\n               headers:{\r\n                   'Content-Type':file.type\r\n               }\r\n           } \r\n           axios.put(signedRequest, file, options)\r\n           .then(res=>{\r\n               console.log('axios put request',res.data)\r\n               setIsUploading(false)\r\n               setUrl(url)\r\n               console.log('url state has been set',url)\r\n               //Need DB request here\r\n               axios.put(`/companies/${props.driver.company_id}/drivers/${props.driver.driver_d_id}?q=profile_pic`, {url})\r\n            .then(res=>{\r\n                console.log('res.data from the db request',res.data)\r\n                props.updatePic()})\r\n            .catch(e=>console.log(e))\r\n            \r\n           props.handleFormToggle(false)\r\n        })\r\n           .catch(e=>{\r\n               setIsUploading(false)\r\n               if(e.status === 403){\r\n                   alert(`Your request for a signed URL failed with a status 403. Double check the CORS configuration  ${e.stack}`)\r\n               }\r\n               else{\r\n                   alert(`ERROR : ${e.status}\\n ${e.stack}`)\r\n               }\r\n           })\r\n\r\n        }\r\n    }\r\n    return(\r\n        <div>\r\n            <Dropzone\r\n    onDropAccepted={getSignedRequest}\r\n    accept=\"image/*\"\r\n    multiple={false}>\r\n    {({getRootProps, getInputProps}) => (\r\n    <div \r\n        style = {{\r\n        position: 'relative',\r\n        width: 160,\r\n        height: 80,\r\n        borderWidth: 5,\r\n        marginTop: 25,\r\n        borderColor: 'gray',\r\n        borderStyle: 'dashed',\r\n        borderRadius: 5,\r\n        display: 'inline-block',\r\n        fontSize: 17,}}\r\n        {...getRootProps()}>\r\n        <input {...getInputProps()} />\r\n        {isUploading ? <GridLoader /> : <p>Drop files here, or click to select files</p>}\r\n    </div>\r\n    )}\r\n</Dropzone>\r\n        </div>\r\n    )\r\n}","S:\\Projects\\transport-tracker\\src\\components\\MapboxGL\\DriverMap.js",["136","137","138","139"],"import React, { useEffect, useRef, useState } from 'react'\r\nimport mapboxgl, { Marker } from \"mapbox-gl\";\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport './MapboxGL.scss'\r\nimport 'dotenv'\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nconst { REACT_APP_MAPBOX_APIKEY} = process.env;\r\n\r\nfunction DriverMap(props){\r\n    \r\n    const mapContainer = useRef(\"\");\r\n    \r\n    \r\n    mapboxgl.accessToken = REACT_APP_MAPBOX_APIKEY\r\n    const styles = {\r\n        width: \"400px\",\r\n        height: \"400px\",\r\n        borderRadius: \"10px\"        \r\n    };\r\n    useEffect(()=>{\r\n        let map=new mapboxgl.Map({\r\n            container:mapContainer.current,\r\n            style:'mapbox://styles/mapbox/streets-v11',\r\n            center:[-111,33],\r\n            zoom:3\r\n        })\r\n        map.on('load',(e)=>{\r\n            //get driver lat and lng to create marker\r\n            axios.get(`/companies/${props.id}/drivers`)\r\n            .then(res=>{\r\n                \r\n                console.log('new location',res.data)\r\n                res.data.map(driver=>{\r\n                    const markerNode = document.createElement('div')\r\n                    markerNode.className='driver-marker'\r\n                    markerNode.style.backgroundImage=`url(https://persona-project.s3-us-west-1.amazonaws.com/${driver.name.replace(/\\s/g, '-')}-${driver.driver_d_id}-profile_pic)`\r\n                    \r\n                              \r\n                    new mapboxgl.Marker(\r\n                        markerNode            \r\n                        \r\n                        )\r\n                        .setLngLat({lng:driver.lng,lat:driver.lat})\r\n                        .setPopup( new mapboxgl.Popup()\r\n                        .setHTML(`<h3>${driver.name}</h3>`)\r\n                        )\r\n                        .addTo(map)\r\n                        \r\n              })\r\n                \r\n            })\r\n        })\r\n\r\n    },[props.drivers])\r\n\r\n    return(\r\n        <div ref={(el) => (mapContainer.current = el)} style={styles} />\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(reduxState){\r\n    return reduxState\r\n}\r\nexport default connect(mapStateToProps)(withRouter(DriverMap))","S:\\Projects\\transport-tracker\\src\\components\\Home\\Welcome.js",[],{"ruleId":"140","replacedBy":"141"},{"ruleId":"142","replacedBy":"143"},{"ruleId":"144","severity":1,"message":"145","line":42,"column":7,"nodeType":"146","endLine":42,"endColumn":9,"suggestions":"147"},{"ruleId":"148","severity":1,"message":"149","line":4,"column":10,"nodeType":"150","messageId":"151","endLine":4,"endColumn":14},{"ruleId":"148","severity":1,"message":"152","line":6,"column":8,"nodeType":"150","messageId":"151","endLine":6,"endColumn":18},{"ruleId":"144","severity":1,"message":"153","line":45,"column":7,"nodeType":"146","endLine":45,"endColumn":9,"suggestions":"154"},{"ruleId":"148","severity":1,"message":"155","line":58,"column":11,"nodeType":"150","messageId":"151","endLine":58,"endColumn":26},{"ruleId":"148","severity":1,"message":"156","line":62,"column":11,"nodeType":"150","messageId":"151","endLine":62,"endColumn":27},{"ruleId":"144","severity":1,"message":"157","line":74,"column":11,"nodeType":"146","endLine":74,"endColumn":25,"suggestions":"158"},{"ruleId":"148","severity":1,"message":"159","line":13,"column":10,"nodeType":"150","messageId":"151","endLine":13,"endColumn":20},{"ruleId":"148","severity":1,"message":"160","line":19,"column":12,"nodeType":"150","messageId":"151","endLine":19,"endColumn":21},{"ruleId":"148","severity":1,"message":"161","line":19,"column":22,"nodeType":"150","messageId":"151","endLine":19,"endColumn":34},{"ruleId":"144","severity":1,"message":"162","line":81,"column":7,"nodeType":"146","endLine":81,"endColumn":9,"suggestions":"163"},{"ruleId":"148","severity":1,"message":"164","line":5,"column":17,"nodeType":"150","messageId":"151","endLine":5,"endColumn":24},{"ruleId":"148","severity":1,"message":"165","line":20,"column":11,"nodeType":"150","messageId":"151","endLine":20,"endColumn":21},{"ruleId":"148","severity":1,"message":"166","line":2,"column":20,"nodeType":"150","messageId":"151","endLine":2,"endColumn":26},{"ruleId":"148","severity":1,"message":"167","line":3,"column":8,"nodeType":"150","messageId":"151","endLine":3,"endColumn":14},{"ruleId":"148","severity":1,"message":"168","line":16,"column":10,"nodeType":"150","messageId":"151","endLine":16,"endColumn":13},{"ruleId":"148","severity":1,"message":"169","line":16,"column":15,"nodeType":"150","messageId":"151","endLine":16,"endColumn":21},{"ruleId":"148","severity":1,"message":"160","line":18,"column":10,"nodeType":"150","messageId":"151","endLine":18,"endColumn":19},{"ruleId":"148","severity":1,"message":"161","line":18,"column":20,"nodeType":"150","messageId":"151","endLine":18,"endColumn":32},{"ruleId":"148","severity":1,"message":"170","line":53,"column":17,"nodeType":"150","messageId":"151","endLine":53,"endColumn":31},{"ruleId":"171","severity":1,"message":"172","line":53,"column":68,"nodeType":"173","messageId":"174","endLine":53,"endColumn":70},{"ruleId":"144","severity":1,"message":"175","line":96,"column":9,"nodeType":"146","endLine":96,"endColumn":25,"suggestions":"176"},{"ruleId":"148","severity":1,"message":"177","line":3,"column":8,"nodeType":"150","messageId":"151","endLine":3,"endColumn":14},{"ruleId":"148","severity":1,"message":"178","line":8,"column":8,"nodeType":"150","messageId":"151","endLine":8,"endColumn":13},{"ruleId":"144","severity":1,"message":"179","line":24,"column":7,"nodeType":"146","endLine":24,"endColumn":37,"suggestions":"180"},{"ruleId":"144","severity":1,"message":"181","line":25,"column":7,"nodeType":"146","endLine":25,"endColumn":37,"suggestions":"182"},{"ruleId":"148","severity":1,"message":"183","line":4,"column":8,"nodeType":"150","messageId":"151","endLine":4,"endColumn":20},{"ruleId":"148","severity":1,"message":"184","line":9,"column":11,"nodeType":"150","messageId":"151","endLine":9,"endColumn":14},{"ruleId":"148","severity":1,"message":"185","line":1,"column":36,"nodeType":"150","messageId":"151","endLine":1,"endColumn":44},{"ruleId":"148","severity":1,"message":"166","line":2,"column":20,"nodeType":"150","messageId":"151","endLine":2,"endColumn":26},{"ruleId":"171","severity":1,"message":"172","line":37,"column":36,"nodeType":"173","messageId":"174","endLine":37,"endColumn":38},{"ruleId":"144","severity":1,"message":"186","line":58,"column":7,"nodeType":"146","endLine":58,"endColumn":22,"suggestions":"187"},"no-native-reassign",["188"],"no-negated-in-lhs",["189"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.","ArrayExpression",["190"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'DriverEdit' is defined but never used.","React Hook useEffect has a missing dependency: 'getDrivers'. Either include it or remove the dependency array.",["191"],"'handleEditTrips' is assigned a value but never used.","'handleDeleteTrip' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'getTrips'. Either include it or remove the dependency array.",["192"],"'GridLoader' is defined but never used.","'driverPos' is assigned a value but never used.","'setDriverPos' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'getTrips', 'props.d_id', and 'props.id'. Either include them or remove the dependency array.",["193"],"'setDate' is assigned a value but never used.","'handleEdit' is assigned a value but never used.","'Marker' is defined but never used.","'Moment' is defined but never used.","'pos' is assigned a value but never used.","'setPos' is assigned a value but never used.","'receiptMarkers' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","React Hook useEffect has missing dependencies: 'REACT_APP_MAPBOX_APIKEY' and 'props'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["194"],"'moment' is defined but never used.","'axios' is defined but never used.","React Hook useEffect has missing dependencies: 'props.company_id', 'props.driver_d_id', 'props.match.params.company_id', 'props.match.params.driver_d_id', 'props.match.params.trip_id', and 'state'. Either include them or remove the dependency array.",["195"],"React Hook useEffect has missing dependencies: 'props.company_id' and 'props.driver_d_id'. Either include them or remove the dependency array.",["196"],"'randomstring' is defined but never used.","'url' is assigned a value but never used.","'useState' is defined but never used.","React Hook useEffect has a missing dependency: 'props.id'. Either include it or remove the dependency array.",["197"],"no-global-assign","no-unsafe-negation",{"desc":"198","fix":"199"},{"desc":"200","fix":"201"},{"desc":"202","fix":"203"},{"desc":"204","fix":"205"},{"desc":"206","fix":"207"},{"desc":"208","fix":"209"},{"desc":"210","fix":"211"},{"desc":"212","fix":"213"},"Update the dependencies array to be: [props]",{"range":"214","text":"215"},"Update the dependencies array to be: [getDrivers]",{"range":"216","text":"217"},"Update the dependencies array to be: [getTrips, trips.length]",{"range":"218","text":"219"},"Update the dependencies array to be: [getTrips, props.d_id, props.id]",{"range":"220","text":"221"},"Update the dependencies array to be: [REACT_APP_MAPBOX_APIKEY, props, props.receipts]",{"range":"222","text":"223"},"Update the dependencies array to be: [props.company_id, props.driver_d_id, props.match.params.company_id, props.match.params.driver_d_id, props.match.params.trip_id, props.receipts, props.trip_id, state]",{"range":"224","text":"225"},"Update the dependencies array to be: [props.company_id, props.driver_d_id, props.receipts, props.trip_id]",{"range":"226","text":"227"},"Update the dependencies array to be: [props.drivers, props.id]",{"range":"228","text":"229"},[1381,1383],"[props]",[1383,1385],"[getDrivers]",[2408,2422],"[getTrips, trips.length]",[2748,2750],"[getTrips, props.d_id, props.id]",[3697,3713],"[REACT_APP_MAPBOX_APIKEY, props, props.receipts]",[917,947],"[props.company_id, props.driver_d_id, props.match.params.company_id, props.match.params.driver_d_id, props.match.params.trip_id, props.receipts, props.trip_id, state]",[986,1016],"[props.company_id, props.driver_d_id, props.receipts, props.trip_id]",[1973,1988],"[props.drivers, props.id]"]